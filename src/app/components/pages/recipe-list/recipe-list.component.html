<div class="header-main text-center py-5 text-white bg-gradient-custom" @fadeInHeader>
  <h1 class="site-title mb-3">Discover Amazing Recipes</h1>
  <p class="site-description mb-4">Explore delicious dishes from around the world</p>
  <a routerLink="/new" class="btn btn-outline-light animate-btn mb-4">Share Your Recipe</a>
  <div class="search-container w-75 mx-auto position-relative">
    <input
      type="text" 
      class="form-control search-input shadow-lg ps-5"
      [(ngModel)]="searchTitle"
      (ngModelChange)="applyFilters()"
      placeholder="Search recipes by title..."
    />
    <i class="fas fa-search search-icon position-absolute top-50 translate-middle-y ms-3"></i>
  </div>
</div>

<div class="container my-4">
  <div class="d-flex flex-wrap justify-content-center gap-3 mb-4">
    <button class="btn btn-outline-primary animate-btn" (click)="filterByCategory('vegetable')">
      <i class="fas fa-leaf"></i> Légumes
    </button>
    <button class="btn btn-outline-success animate-btn" (click)="filterByCategory('fruit')">
      <i class="fas fa-apple-alt"></i> Fruits
    </button>
    <button class="btn btn-outline-warning animate-btn" (click)="filterByCategory('dessert')">
      <i class="fas fa-ice-cream"></i> Desserts
    </button>
    <button class="btn btn-outline-danger animate-btn" (click)="filterByCategory('meat')">
      <i class="fas fa-drumstick-bite"></i> Viande
    </button>
    <button class="btn btn-outline-info animate-btn" (click)="filterByCategory('vegan')">
      <i class="fas fa-seedling"></i> Vegan
    </button>
    <button class="btn btn-outline-dark animate-btn" (click)="filterByCategory('drink')">
      <i class="fas fa-coffee"></i> Boissons
    </button>
    <button class="btn btn-outline-secondary animate-btn" (click)="resetFilters()">
      <i class="fas fa-globe"></i> Tous
    </button>
  </div>

  <div class="row g-4" @fadeInUpStagger>
    <ng-container *ngFor="let post of filteredPosts; let i = index">
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm article-card animate-fade" [style.animation-delay]="i * 0.1 + 's'">
          <div class="article-image"
            [style.backgroundImage]="'url(' + post.image + ')'">
            <div class="overlay-title">{{ post.title }}</div>
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ post.title }}</h5>
            <div class="text-muted small mb-2">
              <span class="article-author">Hamed lkaget</span> &bull;
              <span class="date">{{ post.date | date:'shortDate' }}</span>
            </div>
            <p class="card-text flex-grow-1">{{ post.description }}</p>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="star-rating">
                <span *ngFor="let star of [].constructor(post.satars || 0)">★</span>
                <span *ngFor="let star of [].constructor(5 - (post.satars || 0))" class="text-muted">☆</span>
              </div>
              <span class="price-tag bg-primary text-white px-2 py-1 rounded">{{ post.price }} DH</span>
            </div>
            <a [routerLink]="['/details', post.id]" class="btn btn-primary mt-auto">View Recipe</a>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
